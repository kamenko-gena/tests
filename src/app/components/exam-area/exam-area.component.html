<div class="container">
    @if (questionsForShow()){
    <div class="progress-bar-block">
        <progress
            tuiProgressBar
            size="s"
            [value]="userClosedQuestions.length"
            [max]="allQuestionsData.length"
        ></progress>
        <span>{{progressPercent()}}%</span>
    </div>
    <div class="title-container">
        <p>–í–æ–ø—Ä–æ—Å: {{currentNum+1}} –∏–∑ {{allQuestionsData.length}}</p>
        <tui-input-number
            class="input-number-field"
            tuiTextfieldSize="s"
            [formControl]="inputQuestionNumber"
            (input)="setQuestionNumber()"
            >–í–≤–µ–¥–∏—Ç–µ ‚Ññ –≤–æ–ø—Ä–æ—Å–∞
        </tui-input-number>
    </div>
    <h3>{{questionsForShow()?.question}}</h3>
    @if(questionsForShow()?.image) {
    <img
        class="question-iamge"
        src="assets/{{questionsForShow()?.image}}"
        [alt]="questionsForShow()?.image"
    />
    } @if(showErrorExpand()) {
    <div class="error-expand">
        <h5>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!</h5>
        <p>{{questionsForShow()?.description}}</p>
    </div>
    } @if(showCorrectExpand()) {
    <div class="correct-expand">
        <h5>–ü—Ä–∞–≤–∏–ª—å–Ω–æ!</h5>
    </div>
    }
    <div class="answers">
        @for(item of questionsForShow()?.answers! | keyvalue | randomData; track
        $index) {
        <tui-radio-labeled
            [formControl]="userAnswer"
            size="m"
            [item]="item.key"
        >
            <span
                [ngClass]="getClass(item.key, questionsForShow()?.correctAnswer??'')"
                >{{item.value}}</span
            >
        </tui-radio-labeled>
        }
    </div>

    <div class="buttons-container">
        <div class="arrow-buttons-container">
            <button
                [disabled]="currentNum <= 0"
                appearance="flat"
                icon="tuiIconArrowLeft"
                tuiButton
                size="s"
                type="button"
                (click)="showQuestionByNumber(currentNum-1)"
            >
                –ù–∞–∑–∞–¥
            </button>

            <button
                [disabled]="currentNum === allQuestionsData.length - 1"
                appearance="flat"
                iconRight="tuiIconArrowRight"
                tuiButton
                size="s"
                type="button"
                (click)="showQuestionByNumber(currentNum+1)"
            >
                –î–∞–ª–µ–µ
            </button>
        </div>
        <div class="answer-button">
            <button
                size="m"
                appearance="accent"
                [disabled]="!userAnswer.value || userAnswer.status === 'DISABLED'"
                tuiButton
                (click)="answer((questionsForShow()?.correctAnswer??''), currentNum)"
            >
                –û—Ç–≤–µ—Ç–∏—Ç—å
            </button>
        </div>
    </div>
    <div class="footer-buttons">
        <div class="footer-block">
            <button
                tuiButton
                appearance="flat"
                size="s"
                (click)="shuffleQuestions()"
            >
                –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã
            </button>
            <button
                (click)=" resetDataQuestions()"
                appearance="flat"
                size="s"
                tuiButton
            >
                –ó–∞–Ω–æ–≤–æ
            </button>
        </div>
        <button
            class="main-menu-button"
            appearance="outline"
            size="s"
            routerLink="/"
            tuiButton
        >
            –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        </button>
    </div>

    }
</div>

<ng-template #ExamFailed>
    <tui-badge
        class="faild-badge-title"
        status="custom"
        value="üòî –≠–∫–∑–∞–º–µ–Ω –Ω–µ —Å–¥–∞–Ω!"
    ></tui-badge>
    <div>
        –í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ <b>{{userCorrectAnswers}}</b> –≤–æ–ø—Ä–æ—Å(–æ–≤) –∏–∑
        <b>{{allQuestionsData.length}}</b>
    </div>
</ng-template>

<ng-template #ExamPassed>
    <tui-badge
        class="passed-badge-title"
        status="custom"
        value="üòé –≠–∫–∑–∞–º–µ–Ω —Å–¥–∞–Ω!"
    ></tui-badge>
    <div>
        –í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ <b>{{userCorrectAnswers}}</b> –≤–æ–ø—Ä–æ—Å(–æ–≤) –∏–∑
        <b>{{allQuestionsData.length}}</b>
    </div>
</ng-template>
